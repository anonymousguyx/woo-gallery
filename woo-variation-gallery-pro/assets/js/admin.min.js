!function(e){var t={};function a(o){if(t[o])return t[o].exports;var i=t[o]={i:o,l:!1,exports:{}};return e[o].call(i.exports,i,i.exports,a),i.l=!0,i.exports}a.m=e,a.c=t,a.d=function(e,t,o){a.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:o})},a.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},a.t=function(e,t){if(1&t&&(e=a(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var o=Object.create(null);if(a.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)a.d(o,i,function(t){return e[t]}.bind(null,i));return o},a.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return a.d(t,"a",t),t},a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},a.p="/",a(a.s=0)}([function(e,t,a){a(1),e.exports=a(3)},function(e,t,a){function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,a=new WeakMap;return(i=function(e){return e?a:t})(e)}jQuery((function(e){Promise.resolve().then((function(){return function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==o(e)&&"function"!=typeof e)return{default:e};var a=i(t);if(a&&a.has(e))return a.get(e);var n={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var l in e)if("default"!==l&&Object.prototype.hasOwnProperty.call(e,l)){var d=r?Object.getOwnPropertyDescriptor(e,l):null;d&&(d.get||d.set)?Object.defineProperty(n,l,d):n[l]=e[l]}return n.default=e,a&&a.set(e,n),n}(a(2))})).then((function(t){var a=t.WooVariationGalleryAdminPro;a.ExtendMediaGrid(),a.DefaultProductGallery(),a.ImageUploader(),a.HandleDiv(),e("#woocommerce-product-data").on("woocommerce_variations_loaded",(function(){a.ImageUploader(),a.Sortable()})),e("#variable_product_options").on("woocommerce_variations_added",(function(){a.ImageUploader(),a.Sortable()})),e(".dokan-product-variation-wrapper").on("dokan_variations_loaded dokan_variations_added",(function(){a.ImageUploader(),a.Sortable()})),e(document).trigger("woo_variation_gallery_pro_admin_loaded")}))}))},function(e,t,a){"use strict";function o(e,t){for(var a=0;a<t.length;a++){var o=t[a];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}a.r(t),a.d(t,"WooVariationGalleryAdminPro",(function(){return n}));var i,n=(i=jQuery,function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,a,n;return t=e,n=[{key:"ExtendMediaGrid",value:function(){wp.media,wp.media.view.Attachment.prototype.template=wp.template("wvg_media_attachment")}},{key:"HandleDiv",value:function(){i(document.body).on("click",".woo-variation-gallery-wrapper .handle-div",(function(){i(this).closest(".woo-variation-gallery-postbox").toggleClass("closed");var e=!i(this).closest(".woo-variation-gallery-postbox").hasClass("closed");i(this).attr("aria-expanded",e)}))}},{key:"DefaultProductGallery",value:function(){var e,t=i("#product_image_gallery"),a=i("#product_images_container").find("ul.product_images");i(".add_product_images").off("click","a").on("click","a",(function(o){var n=i(this);o.preventDefault(),e||(e=wp.media.frames.product_gallery=wp.media({title:n.data("choose"),button:{text:n.data("update")},states:[new wp.media.controller.Library({title:n.data("choose"),filterable:"all",multiple:!0})]})).on("select",(function(){var o=e.state().get("selection"),i=t.val();o.map((function(e){if((e=e.toJSON()).id){i=i?i+","+e.id:e.id;var t=e.sizes&&e.sizes.thumbnail?e.sizes.thumbnail.url:e.url,o="image";e.woo_variation_gallery_video&&(o+=" video"),a.append('<li class="'+o+'" data-attachment_id="'+e.id+'"><img src="'+t+'" /><ul class="actions"><li><a href="#" class="delete" title="'+n.data("delete")+'">'+n.data("text")+"</a></li></ul></li>")}})),t.val(i)})),e.open()}))}},{key:"ImageUploader",value:function(){i(document).off("click",".add-woo-variation-gallery-image"),i(document).off("click",".woo-variation-gallery-images > li.image"),i(document).off("click",".woo_variation_gallery_media_video_popup_link"),i(document).off("click",".remove-woo-variation-gallery-image"),i(document).on("click",".add-woo-variation-gallery-image",this.AddImage),i(document).on("click",".woo-variation-gallery-images > li.image",this.ChangeImage),i(document).on("click",".remove-woo-variation-gallery-image",this.RemoveImage),i(document).on("click",".woo_variation_gallery_media_video_popup_link",this.AttachmentVideoPopup),i(".woocommerce_variation").each((function(){var e=i(this).find(".options:first");i(this).find(".woo-variation-gallery-wrapper").insertBefore(e)})),i(document).trigger("woo_variation_gallery_admin_pro_image_uploader_attached",this)}},{key:"ChangeImage",value:function(t){var a,o=this;t.preventDefault(),t.stopPropagation();var n=i(this).closest(".woo-variation-gallery-wrapper").data("product_variation_id"),r=i(this).find("input.wvg_variation_id_input").val();if(i(this).index(),"undefined"!=typeof wp&&wp.media&&wp.media.editor){if(a)return void a.open();(a=wp.media({title:woo_variation_gallery_admin.choose_image,button:{text:woo_variation_gallery_admin.update_image},library:{type:["image"]}})).on("select",(function(){var t=a.state().get("selection").toJSON().map((function(e){if("image"===e.type){var t=e.id,a=e.woo_variation_gallery_video,o=e.sizes,i=(o=void 0===o?{}:o).thumbnail,r=o.full,l=i?i.url:r.url;return wp.template("woo-variation-gallery-image")({id:t,url:l,product_variation_id:n,woo_variation_gallery_video:a})}})).join("");i(o).after(t),_.delay((function(){i(o).remove()}),1),e.Sortable(),e.VariationChanged(o)})),a.on("open",(function(){var e=a.state().get("selection");if(r>0){var t=wp.media.attachment(r);t.fetch(),e.add(t?[t]:[])}})),a.open()}}},{key:"AddImage",value:function(t){var a,o=this;t.preventDefault(),t.stopPropagation();var n=i(this).closest(".woo-variation-gallery-wrapper").data("product_variation_id");if(i(this).find("input.wvg_variation_id_input").val(),"undefined"!=typeof wp&&wp.media&&wp.media.editor){if(a)return void a.open();(a=wp.media({title:woo_variation_gallery_admin.choose_image,button:{text:woo_variation_gallery_admin.add_image},library:{type:["image"]},multiple:"add"})).on("select",(function(){var t=a.state().get("selection").toJSON().map((function(e){if("image"===e.type){var t=e.id,a=e.woo_variation_gallery_video,o=e.sizes,i=(o=void 0===o?{}:o).thumbnail,r=o.full,l=i?i.url:r.url;return wp.template("woo-variation-gallery-image")({id:t,url:l,product_variation_id:n,woo_variation_gallery_video:a})}})).join("");i(o).closest(".woo-variation-gallery-wrapper").find(".woo-variation-gallery-images").append(t),_.delay((function(){i(o).is("li.image")&&i(o).remove()}),1),e.Sortable(),e.VariationChanged(o)})),a.open()}}},{key:"VariationChanged",value:function(e){i(e).closest(".woocommerce_variation").addClass("variation-needs-update"),i("button.cancel-variation-changes, button.save-variation-changes").removeAttr("disabled"),i("#variable_product_options").trigger("woocommerce_variations_input_changed"),i(e).closest(".dokan-product-variation-itmes").addClass("variation-needs-update"),i(".dokan-product-variation-wrapper").trigger("dokan_variations_input_changed"),i(document).trigger("woo_variation_gallery_admin_variation_changed",this)}},{key:"RemoveImage",value:function(t){var a=this;t.preventDefault(),t.stopPropagation(),e.VariationChanged(this),_.delay((function(){i(a).parent().remove()}),1)}},{key:"Sortable",value:function(){i(".woo-variation-gallery-images").sortable({items:"li.image",cursor:"move",scrollSensitivity:40,forcePlaceholderSize:!0,forceHelperSize:!1,helper:"clone",opacity:.65,placeholder:"woo-variation-gallery-sortable-placeholder",start:function(e,t){t.item.css("background-color","#F6F6F6")},stop:function(e,t){t.item.removeAttr("style")},update:function(){e.VariationChanged(this)}})}},{key:"AttachmentVideoPopup",value:function(e){var t,a=this;if(e.preventDefault(),e.stopPropagation(),"undefined"!=typeof wp&&wp.media&&wp.media.editor){if(t)return void t.open();(t=wp.media({title:woo_variation_gallery_admin.choose_video,button:{text:woo_variation_gallery_admin.add_video},library:{type:["video"]},multiple:!1})).on("select",(function(){var e=t.state().get("selection").first().toJSON();"video"===e.type&&i(a).closest(".compat-attachment-fields").find(".compat-field-woo_variation_gallery_media_video input").val(e.url).change()})),t.on("open",(function(){t.$el.find(".media-frame-content").addClass("wvg-media-frame-modify")})),t.open()}}}],(a=null)&&o(t.prototype,a),n&&o(t,n),Object.defineProperty(t,"prototype",{writable:!1}),e}())},function(e,t){}]);