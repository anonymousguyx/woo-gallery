!function(e){var o={};function t(a){if(o[a])return o[a].exports;var r=o[a]={i:a,l:!1,exports:{}};return e[a].call(r.exports,r,r.exports,t),r.l=!0,r.exports}t.m=e,t.c=o,t.d=function(e,o,a){t.o(e,o)||Object.defineProperty(e,o,{enumerable:!0,get:a})},t.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},t.t=function(e,o){if(1&o&&(e=t(e)),8&o)return e;if(4&o&&"object"==typeof e&&e&&e.__esModule)return e;var a=Object.create(null);if(t.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:e}),2&o&&"string"!=typeof e)for(var r in e)t.d(a,r,function(o){return e[o]}.bind(null,r));return a},t.n=function(e){var o=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(o,"a",o),o},t.o=function(e,o){return Object.prototype.hasOwnProperty.call(e,o)},t.p="/",t(t.s=6)}({6:function(e,o,t){e.exports=t(7)},7:function(e,o,t){function a(e){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function r(e){if("function"!=typeof WeakMap)return null;var o=new WeakMap,t=new WeakMap;return(r=function(e){return e?t:o})(e)}jQuery((function(e){Promise.resolve().then((function(){return function(e,o){if(!o&&e&&e.__esModule)return e;if(null===e||"object"!==a(e)&&"function"!=typeof e)return{default:e};var t=r(o);if(t&&t.has(e))return t.get(e);var n={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var l in e)if("default"!==l&&Object.prototype.hasOwnProperty.call(e,l)){var c=i?Object.getOwnPropertyDescriptor(e,l):null;c&&(c.get||c.set)?Object.defineProperty(n,l,c):n[l]=e[l]}return n.default=e,t&&t.set(e,n),n}(t(8))})).then((function(o){var t=o.WooVariationGalleryAdmin;t.HandleDiv(),t.ImageUploader(),e("#woocommerce-product-data").on("woocommerce_variations_loaded",(function(){t.ImageUploader(),t.Sortable()})),e("#variable_product_options").on("woocommerce_variations_added",(function(){t.ImageUploader(),t.Sortable()})),e(".dokan-product-variation-wrapper").on("dokan_variations_loaded dokan_variations_added",(function(){t.ImageUploader(),t.Sortable()})),e(document).trigger("woo_variation_gallery_admin_loaded")}))}))},8:function(e,o,t){"use strict";function a(e,o){for(var t=0;t<o.length;t++){var a=o[t];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}t.r(o),t.d(o,"WooVariationGalleryAdmin",(function(){return n}));var r,n=(r=jQuery,function(){function e(){!function(e,o){if(!(e instanceof o))throw new TypeError("Cannot call a class as a function")}(this,e)}var o,t,n;return o=e,n=[{key:"GWPAdmin",value:function(){r().gwp_deactivate_popup&&r().gwp_deactivate_popup("woo-variation-gallery")}},{key:"HandleDiv",value:function(){r(document.body).on("click",".woo-variation-gallery-wrapper .handle-div",(function(){r(this).closest(".woo-variation-gallery-postbox").toggleClass("closed");var e=!r(this).closest(".woo-variation-gallery-postbox").hasClass("closed");r(this).attr("aria-expanded",e)}))}},{key:"ImageUploader",value:function(){r(document).off("click",".add-woo-variation-gallery-image"),r(document).off("click",".remove-woo-variation-gallery-image"),r(document).on("click",".add-woo-variation-gallery-image",this.AddImage),r(document).on("click",".remove-woo-variation-gallery-image",this.RemoveImage),r(".woocommerce_variation").each((function(){var e=r(this).find(".options:first");r(this).find(".woo-variation-gallery-wrapper").insertBefore(e)})),r(document).trigger("woo_variation_gallery_admin_image_uploader_attached",this)}},{key:"AddImage",value:function(o){var t,a=this;o.preventDefault(),o.stopPropagation();var n=r(this).data("product_variation_id"),i=r(this).data("product_variation_loop");if("undefined"!=typeof wp&&wp.media&&wp.media.editor){if(t)return void t.open();(t=wp.media({title:woo_variation_gallery_admin.choose_image,button:{text:woo_variation_gallery_admin.add_image},library:{type:["image"]}})).on("select",(function(){var o=t.state().get("selection").toJSON().map((function(e){if("image"===e.type){var o=e.id,t=e.sizes,a=(t=void 0===t?{}:t).thumbnail,r=t.full,l=a?a.url:r.url;return wp.template("woo-variation-gallery-image")({id:o,url:l,product_variation_id:n,loop:i})}})).join("");r(a).parent().prev().find(".woo-variation-gallery-images").append(o),e.Sortable(),e.VariationChanged(a),_.delay((function(){e.ProNotice(a)}),5)})),t.open()}}},{key:"VariationChanged",value:function(e){r(e).closest(".woocommerce_variation").addClass("variation-needs-update"),r("button.cancel-variation-changes, button.save-variation-changes").removeAttr("disabled"),r("#variable_product_options").trigger("woocommerce_variations_input_changed"),r(e).closest(".dokan-product-variation-itmes").addClass("variation-needs-update"),r(".dokan-product-variation-wrapper").trigger("dokan_variations_input_changed"),r(document).trigger("woo_variation_gallery_admin_variation_changed",this)}},{key:"ProNotice",value:function(e){r(e).closest(".woo-variation-gallery-wrapper").find(".woo-variation-gallery-images > li").length,r(e).closest(".woo-variation-gallery-wrapper").find(".woo-variation-gallery-images > li").each((function(o,t){o>=2?(r(t).remove(),r(e).closest(".woo-variation-gallery-wrapper").find(".woo-variation-gallery-pro-button").show()):r(e).closest(".woo-variation-gallery-wrapper").find(".woo-variation-gallery-pro-button").hide()}))}},{key:"RemoveImage",value:function(o){var t=this;o.preventDefault(),o.stopPropagation(),e.VariationChanged(this),_.delay((function(){e.ProNotice(t),r(t).parent().remove()}),1)}},{key:"Sortable",value:function(){r(".woo-variation-gallery-images").sortable({items:"li.image",cursor:"move",scrollSensitivity:40,forcePlaceholderSize:!0,forceHelperSize:!1,helper:"clone",opacity:.65,placeholder:"woo-variation-gallery-sortable-placeholder",start:function(e,o){o.item.css("background-color","#F6F6F6")},stop:function(e,o){o.item.removeAttr("style")},update:function(){e.VariationChanged(this)}})}}],(t=null)&&a(o.prototype,t),n&&a(o,n),Object.defineProperty(o,"prototype",{writable:!1}),e}())}});